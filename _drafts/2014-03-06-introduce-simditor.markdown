---
layout: post
title: Simditor——Tower的新版编辑器
author: 多发
categories:
- Tower
published: true
---

每天，Tower的用户会产生数以千计的讨论、评论和文档。这些在Tower上进行协作、沟通的用户，很大一部分时间都是在使用Tower的富文本编辑器发起讨论、回复任务以及撰写文档。所以富文本编辑器使用体验的好坏，在很大程度上会直接影响Tower整个产品的用户体验。惭愧的是，这样重要的核心功能和体验，我们却做的很差。用户对于编辑器的批评和抱怨一直没有间断过，这些声音一直激励着我们，一定要为Tower的用户提供一个好用靠谱的在线编辑环境。

<!--more-->


###为什么要写Simditor？

很多朋友都有这样的疑问，现在的开源编辑器资源那么丰富，为什么不选择一个成熟、靠谱的开源编辑器来做二次开发，而是去编写一个全新的编辑器。其实这个问题也一度让我们很纠结。

在Tower这个产品发布的早期，我们确实采用了一个叫做WYSIHTML5的开源编辑器。但是随着产品的发展和进化，我们发现第三方开源编辑器有着自己的局限性，这些局限性让我们在很多用户体验和工程复杂性的岔路口选择向工程复杂性妥协，采用跟开源编辑器更契合成本更低的方案，WYSIHTML5逐渐成为我们追求极致体验的障碍。

于是我们开始尝试编写自己的富文本编辑器，也就是目前Tower正在使用的编辑器。这第一次的尝试让我们交足了学费，由于相关经验的缺乏，这个编辑器（它甚至连名字都没有……）在体验和工程上都非常失败。但是这次失败并没有动摇我们的决心，我一直坚信，只有掌握核心技术，熟悉编辑器每一个细微的零件，我们才能为Tower的用户提供极致的编辑和写作体验。

Simditor是我们总结经验教训之后的第二次尝试。


###Simditor是什么样的编辑器？

不同浏览器对富文本编辑的支持有很大的差异。在编写Simditor的过程中，我们遇到的最大挑战就是克服浏览器间的差异，为使用不同浏览器的用户提供完全相同的编辑体验，并且输出完全相同的标准的语义化的html代码。在上一次失败的尝试中，这个难题让我们疲于应付，经常让我们做出拆东墙补西墙的事情。

为了解决这个问题，我们采用了白名单来控制Simditor所支持的html标签，并且严格限制了白名单中html标签的数量，这样在格式化用户输入内容的时候（主要是来自剪贴板的内容）可以采用更加简单清晰的算法。另外，我们尽可能的保留浏览器富文本编辑的默认行为（很多开源浏览器几乎完全重写了浏览器的富文本交互），用最少的代码来处理不同浏览器间的差异。我们还尽量简化工具栏按钮，只保留常用的功能，专注提升这些功能的使用体验，不常用的功能尽量做自动化处理，让Simditor变得简单快速而聪明。如果用一句话来概括Simditor的设计思想那就是：通过做少得到更多，从简单里做出极致。

与前身相比，Simditor的结构更加清晰合理，在保持简单的同时保留了良好的扩展性。为Simditor编写扩展和插件会是一件非常简单的事情。


###Simditor什么时候发布？

为了避免在同一个地方跌倒第二次，我们非常谨慎的对待Simditor的这次升级。目前，我们已经启动了一周的内部测试，并且发现了很多亟待完善的问题，接下来我们会根据内部测试的反馈不断的测试调优，为了最终履行对用户的承诺，提供一个好用靠谱的在线编辑环境。

现在，我们还不能确定Simditor发布的确切日期，不过感兴趣的朋友可以在这里提前试用Simditor，为我们提出宝贵的意见。我们欢迎任何形式的批评、吐槽，更加欢迎有能力有时间的朋友在github为我们贡献代码、参与Simditor的开发。

我们的联系方式：tower[at]mycolorway.com

Simditor代码仓库：[https://github.com/mycolorway/simditor](https://github.com/mycolorway/simditor)

